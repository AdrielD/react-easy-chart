{"version":3,"sources":["../../modules/pie-chart/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport { event as d3LastEvent, select, svg, layout, scale} from 'd3';\nimport { createElement } from 'react-faux-dom';\nimport { Style } from 'radium';\nimport merge from 'lodash.merge';\n\nconst defaultStyles = {\n  '.chart_lines': {\n    stroke: '#fff',\n    strokeWidth: 1\n  },\n  '.chart_text': {\n    fontFamily: 'sans-serif',\n    fontSize: '12px',\n    textAnchor: 'middle',\n    fill: '#fff'\n  }\n};\n\nexport default class PieChart extends React.Component {\n\n  static get propTypes() {\n    return {\n      data: React.PropTypes.array.isRequired,\n      innerHoleSize: React.PropTypes.number,\n      size: React.PropTypes.number,\n      padding: React.PropTypes.number,\n      labels: React.PropTypes.bool,\n      styles: React.PropTypes.object,\n      mouseOverHandler: React.PropTypes.func,\n      mouseOutHandler: React.PropTypes.func,\n      mouseMoveHandler: React.PropTypes.func,\n      clickHandler: React.PropTypes.func\n    };\n  }\n\n  static get defaultProps() {\n    return {\n      size: 200,\n      innerHoleSize: 0,\n      padding: 2,\n      labels: false,\n      styles: {},\n      mouseOverHandler: () => {},\n      mouseOutHandler: () => {},\n      mouseMoveHandler: () => {},\n      clickHandler: () => {}\n    };\n  }\n\n  render() {\n    const {\n      mouseOverHandler,\n      mouseOutHandler,\n      mouseMoveHandler,\n      clickHandler,\n      styles,\n      innerHoleSize,\n      size,\n      padding,\n      labels } = this.props;\n    const outerRadius = size / 2;\n    const arc = svg.arc()\n      .outerRadius(outerRadius - padding)\n      .innerRadius((innerHoleSize / 2) - padding);\n\n    const labelArc = svg.arc()\n      .outerRadius(outerRadius - padding - ((20 * outerRadius) / 100))\n      .innerRadius(outerRadius - padding - ((20 * outerRadius) / 100));\n\n    const color = scale.category20();\n    const node = createElement('svg');\n\n    const svgNode = select(node)\n      .attr('width', size)\n      .attr('height', size)\n      .append('g')\n      .attr('transform', `translate(${ outerRadius }, ${ outerRadius })`);\n\n    const g = svgNode.selectAll('.arc')\n      .data(layout.pie().value((d) => d.value)(this.props.data))\n      .enter().append('g');\n\n    g.append('path')\n      .attr('d', arc)\n      .attr('class', 'chart_lines')\n      .style('fill', (d, i) => d.data.color ? d.data.color : color(i))\n      .on('mouseover', (d) => mouseOverHandler(d, d3LastEvent))\n      .on('mouseout', (d) => mouseOutHandler(d, d3LastEvent))\n      .on('mousemove', () => mouseMoveHandler(d3LastEvent))\n      .on('click', (d) => clickHandler(d, d3LastEvent));\n\n    if (labels) {\n      g.append('text')\n        .attr('transform', (d) => `translate(${labelArc.centroid(d)})`)\n        .text((d) => d.data.key)\n        .attr('class', 'chart_text')\n        .on('click', (d) => clickHandler(d, d3LastEvent));\n    }\n    const uid = Math.floor(Math.random() * new Date().getTime());\n\n    return (\n      <div className={`pie_chart${uid}`}>\n        <Style scopeSelector={`.pie_chart${uid}`} rules={merge({}, defaultStyles, styles)}/>\n        {node.toReact()}\n      </div>\n    );\n  }\n}\n"]}