{"version":3,"sources":["../../modules/area-chart/index.js"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQA,IAAM,eAAe;AACnB,WAAS;AACP,YAAQ,OAAR;AACA,iBAAa,CAAb;GAFF;AAIA,UAAQ;AACN,iBAAa,CAAb;GADF;AAGA,YAAU;AACR,OAAG,CAAH;GADF;AAGA,kBAAgB;AACd,OAAG,CAAH;AACA,aAAS,GAAT;GAFF;AAIA,WAAS;AACP,UAAM,YAAN;GADF;AAGA,kBAAgB;AACd,UAAM,YAAN;GADF;AAGA,2BAAyB;AACvB,UAAM,MAAN;AACA,YAAQ,MAAR;AACA,uBAAmB,YAAnB;GAHF;AAKA,iBAAe;AACb,aAAS,MAAT;GADF;AAGA,gBAAc;AACZ,YAAQ,WAAR;AACA,aAAS,KAAT;GAFF;CA7BI;;IAoCe;;;;;wBACI;AACrB,aAAO;AACL,cAAM,gBAAM,SAAN,CAAgB,KAAhB,CAAsB,UAAtB;AACN,eAAO,gBAAM,SAAN,CAAgB,MAAhB;AACP,gBAAQ,gBAAM,SAAN,CAAgB,MAAhB;AACR,eAAO,gBAAM,SAAN,CAAgB,MAAhB;AACP,eAAO,gBAAM,SAAN,CAAgB,MAAhB;AACP,qBAAa,gBAAM,SAAN,CAAgB,MAAhB;AACb,qBAAa,gBAAM,SAAN,CAAgB,MAAhB;AACb,eAAO,gBAAM,SAAN,CAAgB,MAAhB;AACP,gBAAQ,gBAAM,SAAN,CAAgB,MAAhB;AACR,cAAM,gBAAM,SAAN,CAAgB,IAAhB;AACN,cAAM,gBAAM,SAAN,CAAgB,IAAhB;AACN,sBAAc,gBAAM,SAAN,CAAgB,KAAhB;AACd,sBAAc,gBAAM,SAAN,CAAgB,KAAhB;AACd,oBAAY,gBAAM,SAAN,CAAgB,KAAhB;AACZ,oBAAY,gBAAM,SAAN,CAAgB,MAAhB;AACZ,+BAAuB,gBAAM,SAAN,CAAgB,MAAhB;AACvB,gBAAQ,gBAAM,SAAN,CAAgB,MAAhB;AACR,gBAAQ,gBAAM,SAAN,CAAgB,MAAhB;AACR,oBAAY,gBAAM,SAAN,CAAgB,IAAhB;AACZ,0BAAkB,gBAAM,SAAN,CAAgB,IAAhB;AAClB,yBAAiB,gBAAM,SAAN,CAAgB,IAAhB;AACjB,0BAAkB,gBAAM,SAAN,CAAgB,IAAhB;AAClB,sBAAc,gBAAM,SAAN,CAAgB,IAAhB;OAvBhB,CADqB;;;;wBA4BG;AACxB,aAAO;AACL,eAAO,GAAP;AACA,gBAAQ,GAAR;AACA,qBAAa,UAAb;AACA,qBAAa,QAAb;AACA,cAAM,KAAN;AACA,oBAAY,EAAZ;AACA,eAAO,QAAP;AACA,eAAO,QAAP;AACA,oBAAY,EAAC,GAAG,EAAH,EAAO,GAAG,EAAH,EAApB;AACA,0BAAkB,4BAAM,EAAN;AAClB,yBAAiB,2BAAM,EAAN;AACjB,0BAAkB,4BAAM,EAAN;AAClB,sBAAc,wBAAM,EAAN;OAbhB,CADwB;;;;AAkB1B,WA/CmB,SA+CnB,CAAY,KAAZ,EAAmB;0BA/CA,WA+CA;;uEA/CA,sBAgDX,QADW;;AAEjB,UAAK,SAAL,GAAiB,0BAAO,MAAM,WAAN,CAAP,CAA0B,KAA1B,CAFA;AAGjB,UAAK,GAAL,GAAW,0BAAX,CAHiB;;GAAnB;;eA/CmB;;6BAqDV;;;mBAmBS,KAAK,KAAL,CAnBT;UACA,mBADA;UAEL,qBAFK;UAGL,qBAHK;UAIL,qBAJK;UAKL,mBALK;UAML,+BANK;UAOL,mCAPK;UAQL,mCARK;UASL,uBATK;UAUL,uBAVK;UAWL,iCAXK;UAYL,mBAZK;UAaL,qDAbK;UAcL,2CAdK;UAeL,yCAfK;UAgBL,2CAhBK;UAiBL,mCAjBK;UAkBL,+BAlBK;UAmBL,+BAnBK;;AAoBP,UAAM,SAAS,wBAAW,IAAX,EAAiB,KAAK,KAAL,CAAW,MAAX,CAA1B,CApBC;AAqBP,UAAM,QAAQ,oBAAO,KAAK,KAAL,CAAW,KAAX,EAAkB,OAAO,IAAP,EAAa,OAAO,KAAP,CAA9C,CArBC;;AAuBP,UAAM,SAAS,oBAAO,KAAK,KAAL,CAAW,MAAX,EAAmB,OAAO,GAAP,EAAY,OAAO,MAAP,CAA/C,CAvBC;;AAyBP,UAAM,IAAI,mCAAsB,GAAtB,EAA2B,YAA3B,EAAyC,IAAzC,EAA+C,KAA/C,EAAsD,KAAtD,EAA6D,KAAK,SAAL,CAAjE,CAzBC;AA0BP,UAAM,IAAI,mCAAsB,GAAtB,EAA2B,YAA3B,EAAyC,IAAzC,EAA+C,KAA/C,EAAsD,MAAtD,EAA8D,KAAK,SAAL,CAAlE,CA1BC;;AA4BP,UAAM,SAAS,8BAAiB,GAAjB,EAAsB,KAAtB,EAA6B,KAAK,SAAL,CAAtC,CA5BC;AA6BP,UAAM,SAAS,8BAAiB,GAAjB,EAAsB,KAAtB,EAA6B,KAAK,SAAL,CAAtC,CA7BC;AA8BP,UAAM,OAAO,OAAI,IAAJ,GAAW,WAAX,CAAuB,WAAvB,EAAoC,CAApC,CAAsC,UAAC,CAAD;eAAO,EAAE,OAAO,CAAP,CAAF;OAAP,CAAtC,CAA2D,EAA3D,CAA8D,MAA9D,EAAsE,EAAtE,CAAyE,UAAC,CAAD;eAAO,EAAE,OAAO,CAAP,CAAF;OAAP,CAAhF,CA9BC;;AAgCP,UAAM,UAAU,iCAAc,KAAd,CAAV,CAhCC;AAiCP,qBAAO,OAAP,EAAgB,IAAhB,CAAqB,OAArB,EAA8B,QAAQ,OAAO,IAAP,GAAc,OAAO,KAAP,CAApD,CAAkE,IAAlE,CAAuE,QAAvE,EAAiF,SAAS,OAAO,GAAP,GAAa,OAAO,MAAP,CAAvG,CAjCO;AAkCP,UAAM,OAAO,eAAO,OAAP,EAAgB,MAAhB,CAAuB,GAAvB,EAA4B,IAA5B,CAAiC,WAAjC,iBAA2D,OAAO,IAAP,SAAe,OAAO,GAAP,MAA1E,CAAP,CAlCC;AAmCP,iBAAW,MAAX,CAAkB,CAAC,WAAD,EAAc,QAAd,EAAwB,QAAxB,EAAkC,KAAlC,CAAlB,EAA4D,GAA5D,CAAgE,UAAC,OAAD,EAAU,CAAV,EAAgB;AAC9E,YAAM,WAAW,eAAO,OAAP,EAAgB,MAAhB,CAAuB,MAAvB,EACd,MADc,CACP,gBADO,EAEd,IAFc,CAET,IAFS,gBAES,UAAK,OAAK,GAAL,CAFd,CAGd,IAHc,CAGT,IAHS,EAGH,IAHG,EAId,IAJc,CAIT,IAJS,EAIH,IAJG,EAKd,IALc,CAKT,IALS,EAKH,IALG,EAMd,IANc,CAMT,IANS,EAMH,MANG,CAAX,CADwE;;AAS9E,8BAAoB,CAApB,IAA2B,EAAC,MAAM,OAAN,EAA5B,CAT8E;AAU9E,iBAAS,MAAT,CAAgB,MAAhB,EACG,IADH,CACQ,QADR,EACkB,IADlB,EAEG,IAFH,CAEQ,OAFR,kBAE+B,6BAF/B,EAV8E;;AAc9E,iBAAS,MAAT,CAAgB,MAAhB,EACG,IADH,CACQ,QADR,EACkB,MADlB,EAEG,IAFH,CAEQ,OAFR,kBAE+B,6BAF/B,EAd8E;OAAhB,CAAhE,CAnCO;;AAsDP,UAAI,IAAJ,EAAU;AACR,YAAM,QAAQ,OAAI,IAAJ,GAAW,KAAX,CAAiB,CAAjB,EAAoB,MAApB,CAA2B,QAA3B,CAAR,CADE;AAER,YAAI,UAAU,MAAV,IAAoB,qBAApB,EAA2C;AAC7C,gBAAM,UAAN,CAAiB,QAAK,MAAL,CAAY,qBAAZ,CAAjB,EAD6C;SAA/C;AAGA,YAAI,IAAJ,EAAU,MAAM,QAAN,CAAe,CAAC,MAAD,EAAS,CAAxB,EAA2B,WAA3B,CAAuC,EAAvC,EAAV;AACA,YAAI,MAAJ,EAAY,MAAM,KAAN,CAAY,MAAZ,EAAZ;AACA,aAAK,MAAL,CAAY,GAAZ,EACG,IADH,CACQ,OADR,EACiB,QADjB,EAEG,IAFH,CAEQ,WAFR,mBAEoC,YAFpC,EAGG,IAHH,CAGQ,KAHR,EAIG,MAJH,CAIU,MAJV,EAKG,IALH,CAKQ,OALR,EAKiB,OALjB,EAMG,IANH,CAMQ,GANR,EAMa,OAAO,MAAP,GAAgB,CAAhB,CANb,CAOG,IAPH,CAOQ,GAPR,EAOc,KAPd,EAQG,KARH,CAQS,aART,EAQwB,KARxB,EASG,IATH,CASQ,WAAW,CAAX,CATR,CAPQ;;AAkBR,YAAM,QAAQ,OAAI,IAAJ,GAAW,KAAX,CAAiB,CAAjB,EAAoB,MAApB,CAA2B,MAA3B,CAAR,CAlBE;AAmBR,YAAI,UAAU,MAAV,IAAoB,qBAApB,EAA2C;AAC7C,gBAAM,UAAN,CAAiB,QAAK,MAAL,CAAY,qBAAZ,CAAjB,EAD6C;SAA/C;AAGA,YAAI,IAAJ,EAAU,MAAM,QAAN,CAAe,CAAC,KAAD,EAAQ,CAAvB,EAA0B,WAA1B,CAAsC,EAAtC,EAAV;AACA,YAAI,MAAJ,EAAY,MAAM,KAAN,CAAY,MAAZ,EAAZ;AACA,aAAK,MAAL,CAAY,GAAZ,EACG,IADH,CACQ,OADR,EACiB,QADjB,EAEG,IAFH,CAEQ,KAFR,EAGG,MAHH,CAGU,MAHV,EAIG,IAJH,CAIQ,OAJR,EAIiB,OAJjB,EAKG,IALH,CAKQ,WALR,EAKqB,aALrB,EAMG,IANH,CAMQ,GANR,EAMa,CANb,EAOG,IAPH,CAOQ,GAPR,EAOa,CAAC,OAAO,IAAP,CAPd,CAQG,IARH,CAQQ,IARR,EAQc,MARd,EASG,KATH,CASS,aATT,EASwB,KATxB,EAUG,IAVH,CAUQ,WAAW,CAAX,CAVR,CAxBQ;OAAV;AAoCA,WAAK,GAAL,CAAS,UAAC,YAAD,EAAe,CAAf,EAAqB;AAC5B,aAAK,MAAL,CAAY,MAAZ,EACG,KADH,CACS,YADT,EAEG,IAFH,CAEQ,GAFR,EAEa,IAFb,EAGG,KAHH,CAGS,MAHT,qBAGkC,UAAK,OAAK,GAAL,MAHvC,EAD4B;OAArB,CAAT,CA1FO;AAgGP,UAAI,UAAJ,EAAgB;AACd,aAAK,GAAL,CAAS,UAAC,YAAD,EAAe,CAAf,EAAqB;AAC5B,uBAAa,GAAb,CAAiB,UAAC,OAAD,EAAa;AAC5B,iBACC,MADD,CACQ,QADR,EAEC,IAFD,CAEM,OAFN,cAEyB,CAFzB,EAGC,IAHD,CAGM,IAHN,EAGY,YAAM;AAChB,sBAAQ,KAAR;AACE,qBAAM,MAAN;AACE,yBAAO,EAAE,OAAK,SAAL,CAAe,QAAQ,CAAR,CAAjB,CAAP,CADF;AADF;AAII,yBAAO,EAAE,QAAQ,CAAR,CAAT,CADF;AAHF,eADgB;aAAN,CAHZ,CAWC,IAXD,CAWM,IAXN,EAWY,YAAM;AAChB,sBAAQ,KAAR;AACE,qBAAM,MAAN;AACE,yBAAO,EAAE,OAAK,SAAL,CAAe,QAAQ,CAAR,CAAjB,CAAP,CADF;AADF;AAII,yBAAO,EAAE,QAAQ,CAAR,CAAT,CADF;AAHF,eADgB;aAAN,CAXZ,CAmBC,EAnBD,CAmBI,WAnBJ,EAmBiB;qBAAM,iBAAiB,OAAjB;aAAN,CAnBjB,CAoBC,EApBD,CAoBI,UApBJ,EAoBgB;qBAAM,gBAAgB,OAAhB;aAAN,CApBhB,CAqBC,EArBD,CAqBI,WArBJ,EAqBiB;qBAAM;aAAN,CArBjB,CAsBC,EAtBD,CAsBI,OAtBJ,EAsBa;qBAAM,aAAa,OAAb;aAAN,CAtBb,CAD4B;WAAb,CAAjB,CAD4B;SAArB,CAAT,CADc;OAAhB;;AA8BA,aACE;;UAAK,0BAAwB,KAAK,GAAL,EAA7B;QACE,+CAAO,+BAA6B,KAAK,GAAL,EAAY,OAAO,sBAAM,EAAN,EAAU,YAAV,EAAwB,KAAxB,CAAP,EAAhD,CADF;QAEG,QAAQ,OAAR,EAFH;OADF,CA9HO;;;;SArDU;EAAkB,gBAAM,SAAN;;kBAAlB","file":"index.js","sourcesContent":["import React from 'react';\nimport {createElement} from 'react-faux-dom';\nimport {reduce, getValueFunction, getRandomId, calcMargin, setLineDomainAndRange} from '../shared';\nimport {select, svg, time, event as d3LastEvent} from 'd3';\nimport {Style} from 'radium';\nimport merge from 'lodash.merge';\nimport {format} from 'd3-time-format';\n\nconst defaultStyle = {\n  '.area': {\n    stroke: 'black',\n    strokeWidth: 0\n  },\n  '.dot': {\n    strokeWidth: 0\n  },\n  'circle': {\n    r: 4\n  },\n  'circle:hover': {\n    r: 8,\n    opacity: 0.6\n  },\n  '.axis': {\n    font: '10px arial'\n  },\n  '.axis .label': {\n    font: '14px arial'\n  },\n  '.axis path,.axis line': {\n    fill: 'none',\n    stroke: '#000',\n    'shape-rendering': 'crispEdges'\n  },\n  'x.axis path': {\n    display: 'none'\n  },\n  '.tick line': {\n    stroke: 'lightgrey',\n    opacity: '0.7'\n  }\n};\n\n\nexport default class AreaChart extends React.Component {\n  static get propTypes() {\n    return {\n      data: React.PropTypes.array.isRequired,\n      width: React.PropTypes.number,\n      height: React.PropTypes.number,\n      xType: React.PropTypes.string,\n      yType: React.PropTypes.string,\n      datePattern: React.PropTypes.string,\n      interpolate: React.PropTypes.string,\n      style: React.PropTypes.object,\n      margin: React.PropTypes.object,\n      axes: React.PropTypes.bool,\n      grid: React.PropTypes.bool,\n      xDomainRange: React.PropTypes.array,\n      yDomainRange: React.PropTypes.array,\n      areaColors: React.PropTypes.array,\n      axisLabels: React.PropTypes.object,\n      tickTimeDisplayFormat: React.PropTypes.string,\n      yTicks: React.PropTypes.number,\n      xTicks: React.PropTypes.number,\n      dataPoints: React.PropTypes.bool,\n      mouseOverHandler: React.PropTypes.func,\n      mouseOutHandler: React.PropTypes.func,\n      mouseMoveHandler: React.PropTypes.func,\n      clickHandler: React.PropTypes.func\n    };\n  }\n\n  static get defaultProps() {\n    return {\n      width: 200,\n      height: 150,\n      datePattern: '%d-%b-%y',\n      interpolate: 'linear',\n      axes: false,\n      areaColors: [],\n      xType: 'linear',\n      yType: 'linear',\n      axisLabels: {x: '', y: ''},\n      mouseOverHandler: () => {},\n      mouseOutHandler: () => {},\n      mouseMoveHandler: () => {},\n      clickHandler: () => {}\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.parseDate = format(props.datePattern).parse;\n    this.uid = getRandomId();\n  }\n\n  render() {\n    const {data,\n      xType,\n      yType,\n      style,\n      axes,\n      axisLabels,\n      xDomainRange,\n      yDomainRange,\n      xTicks,\n      yTicks,\n      interpolate,\n      grid,\n      tickTimeDisplayFormat,\n      mouseOverHandler,\n      mouseOutHandler,\n      mouseMoveHandler,\n      clickHandler,\n      dataPoints,\n      areaColors} = this.props;\n    const margin = calcMargin(axes, this.props.margin);\n    const width = reduce(this.props.width, margin.left, margin.right);\n\n    const height = reduce(this.props.height, margin.top, margin.bottom);\n\n    const x = setLineDomainAndRange('x', xDomainRange, data, xType, width, this.parseDate);\n    const y = setLineDomainAndRange('y', yDomainRange, data, yType, height, this.parseDate);\n\n    const yValue = getValueFunction('y', yType, this.parseDate);\n    const xValue = getValueFunction('x', xType, this.parseDate);\n    const area = svg.area().interpolate(interpolate).x((d) => x(xValue(d))).y0(height).y1((d) => y(yValue(d)));\n\n    const svgNode = createElement('svg');\n    select(svgNode).attr('width', width + margin.left + margin.right).attr('height', height + margin.top + margin.bottom);\n    const root = select(svgNode).append('g').attr('transform', `translate(${margin.left},${margin.top})`);\n    areaColors.concat(['steelblue', 'orange', 'yellow', 'red']).map((fillCol, i) => {\n      const gradient = select(svgNode).append('defs')\n        .append('linearGradient')\n        .attr('id', `gradient-${i}-${this.uid}`)\n        .attr('x1', '0%')\n        .attr('x2', '0%')\n        .attr('y1', '0%')\n        .attr('y2', '100%');\n\n      defaultStyle[`.dot${i}`] = {fill: fillCol};\n      gradient.append('stop')\n        .attr('offset', '0%')\n        .attr('style', `stop-color:${fillCol};stop-opacity:0.8`);\n\n      gradient.append('stop')\n        .attr('offset', '100%')\n        .attr('style', `stop-color:${fillCol};stop-opacity:0.2`);\n    });\n\n    if (axes) {\n      const xAxis = svg.axis().scale(x).orient('bottom');\n      if (xType === 'time' && tickTimeDisplayFormat) {\n        xAxis.tickFormat(time.format(tickTimeDisplayFormat));\n      }\n      if (grid) xAxis.tickSize(-height, 6).tickPadding(12);\n      if (xTicks) xAxis.ticks(xTicks);\n      root.append('g')\n        .attr('class', 'x axis')\n        .attr('transform', `translate(0,${height})`)\n        .call(xAxis)\n        .append('text')\n        .attr('class', 'label')\n        .attr('y', margin.bottom - 3)\n        .attr('x', (width))\n        .style('text-anchor', 'end')\n        .text(axisLabels.x);\n\n      const yAxis = svg.axis().scale(y).orient('left');\n      if (yType === 'time' && tickTimeDisplayFormat) {\n        yAxis.tickFormat(time.format(tickTimeDisplayFormat));\n      }\n      if (grid) yAxis.tickSize(-width, 6).tickPadding(12);\n      if (yTicks) yAxis.ticks(yTicks);\n      root.append('g')\n        .attr('class', 'y axis')\n        .call(yAxis)\n        .append('text')\n        .attr('class', 'label')\n        .attr('transform', 'rotate(-90)')\n        .attr('x', 0)\n        .attr('y', -margin.left)\n        .attr('dy', '.9em')\n        .style('text-anchor', 'end')\n        .text(axisLabels.y);\n    }\n    data.map((dataElelment, i) => {\n      root.append('path')\n        .datum(dataElelment)\n        .attr('d', area)\n        .style('fill', `url(#gradient-${i}-${this.uid})`);\n    });\n    if (dataPoints) {\n      data.map((dataElelment, i) => {\n        dataElelment.map((dotData) => {\n          root\n          .append('circle')\n          .attr('class', `dot dot${i}`)\n          .attr('cx', () => {\n            switch (xType) {\n              case ('time'):\n                return x(this.parseDate(dotData.x));\n              default:\n                return x(dotData.x);\n            }\n          })\n          .attr('cy', () => {\n            switch (yType) {\n              case ('time'):\n                return y(this.parseDate(dotData.y));\n              default:\n                return y(dotData.y);\n            }\n          })\n          .on('mouseover', () => mouseOverHandler(dotData, d3LastEvent))\n          .on('mouseout', () => mouseOutHandler(dotData, d3LastEvent))\n          .on('mousemove', () => mouseMoveHandler(d3LastEvent))\n          .on('click', () => clickHandler(dotData, d3LastEvent));\n        });\n      });\n    }\n\n    return (\n      <div className={`area-chart${this.uid}`}>\n        <Style scopeSelector={`.area-chart${this.uid}`} rules={merge({}, defaultStyle, style)}/>\n        {svgNode.toReact()}\n      </div>\n    );\n  }\n}\n"]}