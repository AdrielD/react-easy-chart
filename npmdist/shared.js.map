{"version":3,"sources":["../modules/shared.js"],"names":[],"mappings":"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","file":"shared.js","sourcesContent":["import {extent} from 'd3-array';\nimport {linear, ordinal} from 'd3-scale';\nimport {time, select} from 'd3';\n\nexport const rmaColorPalet = ['#3F4C55', '#E3A51A', '#F4E956', '#AAAC84'];\n\nexport const defaultStyle = {\n  '.pie_chart_lines': {\n    stroke: '#fff',\n    strokeWidth: 1,\n    opacity: '1'\n  },\n  '.pie_chart_lines:hover': {\n    opacity: '0.8'\n  },\n  '.pie_chart_text': {\n    fontFamily: 'sans-serif',\n    fontSize: '12px',\n    textAnchor: 'middle',\n    fill: '#000'\n  },\n  '.bar': {\n    fill: 'blue',\n    transition: 'height 0.5s ease-in, y 0.5s ease-in',\n    opacity: 1\n  },\n  '.bar:hover': {\n    opacity: 0.8\n  },\n  '.line': {\n    fill: 'none',\n    strokeWidth: 1.5,\n    opacity: 0.7\n  },\n  '.line:hover': {\n    opacity: 1\n  },\n  '.area': {\n    opacity: 0.7\n  },\n  '.area:hover': {\n    opacity: 1\n  },\n  '.dot': {\n    strokeWidth: 0,\n    opacity: 0.85\n  },\n  '.dot:hover': {\n    opacity: 1\n  },\n  'circle.data-point': {\n    r: 4,\n    opacity: 0.7\n  },\n  'circle.data-point:hover': {\n    r: 6,\n    opacity: 1\n  },\n  'circle.tick-circle': {\n    r: 2,\n    fill: 'lightgrey'\n  },\n  '.x circle.tick-circle': {\n    cy: '8px'\n  },\n  '.axis': {\n    'font-family': 'dobra-light,Arial,sans-serif',\n    'font-size': '9px'\n  },\n  '.axis .label': {\n    font: '14px arial'\n  },\n  '.axis path,.axis line': {\n    fill: 'none',\n    strokeWidth: 1,\n    'shape-rendering': 'crispEdges'\n  },\n  'x.axis path': {\n    display: 'none',\n    stroke: 'lightgrey'\n  },\n  '.tick line': {\n    stroke: 'lightgrey',\n    strokeWidth: 1,\n    opacity: '0.7'\n  }\n};\n\nexport function reduce(x) {\n  let rVal = x;\n  for (let i = 1; i < arguments.length; i++) {\n    rVal -= arguments[i];\n  }\n  return rVal;\n}\n\nexport function getValueFunction(scale, type, dateParser) {\n  const dataIndex = scale === 'x' ? 'x' : 'y';\n  switch (type) {\n    case 'time':\n      return (d) => dateParser(d[dataIndex]);\n    default:\n      return (d) => d[dataIndex];\n  }\n}\n\nexport function createCircularTicks(containerElement) {\n  select(containerElement).select('svg').selectAll('.tick-circle').remove();\n  const ticks = select(containerElement).select('svg').selectAll('.tick');\n  function circleAppender() {\n    select(this).append('circle').attr('class', 'tick-circle');\n  }\n  ticks.each(circleAppender);\n}\n\nexport function getAxisStyles(grid, verticalGrid, yAxisOrientRight) {\n  return {\n    '.x circle.tick-circle ': {\n      fill: verticalGrid ? 'none' : 'lightgrey'\n    },\n    '.y circle.tick-circle': {\n      cx: yAxisOrientRight ? '+5px' : '-8px',\n      fill: grid ? 'none' : 'lightgrey'\n    },\n    '.y.axis line': {\n      display: grid ? 'inline' : 'none',\n      stroke: 'lightgrey'\n    }\n  };\n}\n\nexport function getRandomId() {\n  return Math.floor(Math.random() * new Date().getTime());\n}\n\nexport function calcMargin(axes, margin, yAxisOrientRight, y2:false) {\n  if (margin) return margin;\n  let defaultMargins = axes ? {top: 20, right: y2 ? 50 : 20, bottom: 50, left: 50} : {top: 0, right: 0, bottom: 0, left: 0};\n  if (yAxisOrientRight) {\n    defaultMargins = axes ? {top: 20, right: 50, bottom: 50, left: y2 ? 50 : 20} : {top: 0, right: 0, bottom: 0, left: 0};\n  }\n  return defaultMargins;\n}\n\nexport function findLargestExtent(data, valueFunction) {\n  let low;\n  let high;\n  data.map((dataElement) => {\n    const calcDomainRange = extent(dataElement, valueFunction);\n    low = low < calcDomainRange[0] ? low : calcDomainRange[0];\n    high = high > calcDomainRange[1] ? high : calcDomainRange[1];\n  });\n  return [low, high];\n}\n\nexport function calcDefaultDomain(domainRange, type, dateParser) {\n  if (!domainRange) return null;\n  switch (type) {\n    case 'time':\n      return [dateParser(domainRange[0]), dateParser(domainRange[1])];\n    default:\n      return domainRange;\n  }\n}\n\nexport function setLineDomainAndRange(scale, domainRange, data, type, length, parseDate) {\n  const dataIndex = scale === 'x' ? 'x' : 'y';\n  let d3Axis;\n  switch (type) {\n    case 'text':\n      d3Axis = ordinal();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        data[0].map((d) => d[dataIndex])\n      );\n\n      d3Axis.rangePoints([0, length], 0);\n      break;\n    case 'linear':\n      d3Axis = linear();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        findLargestExtent(data, getValueFunction(scale, type, parseDate))\n      );\n      d3Axis.range(scale === 'x' ? [0, length] : [length, 0]);\n      break;\n    case 'time':\n      d3Axis = time.scale();\n      d3Axis.domain(domainRange ?\n        calcDefaultDomain(domainRange, type, parseDate)\n        :\n        findLargestExtent(data, getValueFunction(scale, type, parseDate))\n      );\n      d3Axis.range(scale === 'x' ? [0, length] : [length, 0]);\n      break;\n    default:\n      break;\n  }\n  return d3Axis;\n}\n"]}