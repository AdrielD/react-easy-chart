{"version":3,"sources":["../../modules/legend/index.js"],"names":[],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport { Style } from 'radium';\nimport {scale} from 'd3';\nimport merge from 'lodash.merge';\n\nconst defaultStyles = {\n  '.legend': {\n    'list-style': 'none',\n    margin: 0,\n    padding: 0\n  },\n  '.legend li': {\n    display: 'block',\n    lineHeight: '24px',\n    marginRight: '24px',\n    marginBottom: '6px',\n    paddingLeft: '24px',\n    position: 'relative'\n  },\n  '.legend li.horizontal': {\n    display: 'inline-block'\n  },\n  '.legend .icon': {\n    width: '12px',\n    height: '12px',\n    borderRadius: '6px',\n    position: 'absolute',\n    left: '0',\n    top: '50%',\n    marginTop: '-6px'\n  }\n};\n\nconst colors = scale.category20().range();\n\nexport default class Legend extends React.Component {\n\n  static get propTypes() {\n    return {\n      config: React.PropTypes.array,\n      data: React.PropTypes.array.isRequired,\n      dataId: React.PropTypes.string.isRequired,\n      horizontal: React.PropTypes.bool,\n      styles: React.PropTypes.object\n    };\n  }\n\n  constructor(props) {\n    super(props);\n    this.tags = [];\n  }\n\n  componentWillMount() {\n    const dataId = this.props.dataId;\n    this.props.data.map(\n      (item) => {\n        const index = this.tags.findIndex((tag) => tag === item[dataId]);\n        if (index === -1) this.tags.push(item[dataId]);\n      }\n    );\n  }\n\n  getList() {\n    const cn = this.props.horizontal ? 'horizontal' : '';\n    return (\n      this.tags.map(\n        (item, index) => {\n          return (\n            <li key={index} className={cn}>\n              <span\n                className=\"icon\"\n                style={{backgroundColor: this.getIconColor(index)}}\n              >\n            </span>\n            {item}\n            </li>\n          );\n        }\n      )\n    );\n  }\n\n  getIconColor(index) {\n    if (typeof this.props.config !== 'undefined') {\n      if (this.props.config.length > index) {\n        return this.props.config[index].color;\n      }\n    }\n    return colors[index];\n  }\n\n  render() {\n    const uid = Math.floor(Math.random() * new Date().getTime());\n    return (\n      <div className={`legend-container-${uid}`}>\n        <Style\n          scopeSelector={`.legend-container-${uid}`}\n          rules={merge({}, defaultStyles, this.props.styles)}\n        />\n        <ul className=\"legend\">{this.getList()}</ul>\n      </div>\n    );\n  }\n}\n"]}